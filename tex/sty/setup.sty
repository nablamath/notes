% Basic
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

% --------------------------------------------------------------

% Packages
\usepackage{amsmath, amsthm, amssymb}
\usepackage{blindtext}
\usepackage{enumitem}
\usepackage{extramarks}
\usepackage{fancyhdr}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{indentfirst}
\usepackage{listings}
\usepackage{mathrsfs}
\usepackage{mdframed}
\usepackage{multicol, multirow}
\usepackage{needspace, setspace}
\usepackage{paracol}
\usepackage{pgf, tikz, pgfplots}
\usepackage{silence}
\usepackage{xcolor}

% --------------------------------------------------------------

% Spacings
\newcommand{\n}{\vspace{3mm}} % Context spacing
\newcommand{\s}{\vspace{1mm}} % Equation spacing
\newcommand{\m}{\vspace{-3mm}} % Reverse context spacing
\newcommand{\propdisp}{\pagebreak} % Proper display page break

% Wordings
\newcommand{\ans}[1][zb]{{\color{#1}\textit{Answer. }\hspace{3mm}}} % Answer
\newcommand{\arl}[1][zr]{{\color{#1}$\brr{\Leftarrow}$\hspace{3mm}}} % Left arrow
\newcommand{\arr}[1][zr]{{\color{#1}$\brr{\Rightarrow}$\hspace{3mm}}} % Right arrow
\newcommand{\cse}[2][zr]{{\color{#1}\textit{Case #2: }\hspace{1mm}}} % Case
\newcommand{\clm}[2][zr]{{\color{#1}$\vdash_{#2}$\hspace{1mm}}} % Claim
\newcommand{\prf}[1][zr]{{\color{#1}\textit{Proof. }\hspace{3mm}}} % Proof
\newcommand{\prt}[2][a]{\hspace{-2mm}{\color{#2}\textit{Part (#1) }}\hspace{1mm}} % Part
\newcommand{\prtc}[2][a]{\hspace{2mm}\prt[#1]{#2}} % Continued part
\newcommand{\rdft}[1][\sct]{{\color{zg}\textit{Definition #1}}} % Refer definition
\newcommand{\rexm}[1][\sct]{{\color{zb}\textit{Example #1}}} % Refer example
\newcommand{\rfig}[1][\sct]{{\color{zy}\textit{Figure #1}}} % Refer figure
\newcommand{\rpst}[1][\sct]{{\color{zr}\textit{Proposition #1}}} % Refer proposition
\newcommand{\rthm}[1][\sct]{{\color{zr}\textit{Theorem #1}}} % Refer theorem
\newcommand{\sct}{\thesection.\thescount} % Counter
\newcommand{\sctd}[2][0]{\the\numexpr\value{section}-#1\relax.\the\numexpr\value{scount}-#2\relax} % Delta counter

% Equations
\newcommand{\C}{\mathbb{C}} % Complex
\newcommand{\N}{\mathbb{N}} % Natural
\newcommand{\Q}{\mathbb{Q}} % Rational
\newcommand{\R}{\mathbb{R}} % Real
\newcommand{\Z}{\mathbb{Z}} % Integer

\newcommand{\GL}{\mathrm{GL}} % General linear group
\newcommand{\SL}{\mathrm{SL}} % Speical linear group

\newcommand{\abs}[1]{\left| #1\right|} % Absolute
\newcommand{\bra}[1]{\left\langle #1\right\rangle} % Angled brackets
\newcommand{\brc}[1]{\left\{ #1\right\}} % Curly brackets
\newcommand{\brr}[1]{\left( #1\right)} % Round brackets
\newcommand{\brs}[1]{\left[ #1\right]} % Square brackets
\newcommand{\diff}{\,\mathrm{d}} % Differential
\newcommand{\erm}[1]{\;\;\;\;\text{#1}} % Equation remarks
\newcommand{\nrm}[1]{\left\| #1\right\|} % Norm
\newcommand{\srm}{\,\mid\,} % Set remarks

% Math operators
\let\Im\relax
\let\Re\relax

\DeclareMathOperator{\Im}{Im} % Imaginary function
\DeclareMathOperator{\Re}{Re} % Real function

% --------------------------------------------------------------

% Colours
\definecolor{gr}{RGB}{120, 120, 120} % Grey
\definecolor{zb}{RGB}{0, 38, 77} % Blue
\definecolor{zg}{RGB}{0, 77, 51} % Green
\definecolor{zp}{RGB}{51, 0, 77} % Purple
\definecolor{zr}{RGB}{77, 0, 38} % Red
\definecolor{zy}{RGB}{77, 64, 0} % Yellow

% Graphing
\usetikzlibrary{arrows}
\pgfplotsset{compat=1.15}

% --------------------------------------------------------------

% Remark
\newcommand{\remark}[1]{
  \noindent \textbf{Remarks}
  
  \begin{nlist}
    \item Context of this document is based on university course \textit{\gettitle} from \textit{Department of Mathematics, The Chinese University of Hong Kong (CUHK)}. The original source can be found at \url{https://www.math.cuhk.edu.hk/course}. The author does not own the source.
    \item This document is assumed unavailable for unauthorized parties that have not attended the university course. It is prohibited to share, including distributing or copying this document to unauthorized parties in any means for any non-academic purpose.
    \item Context of this doucment may not be completely accurate. The author assumes no responsibility or liability for any errors or omissions in the context of this document.
    \item This document is under license CC-BY-SA 4.0. It is allowed to make any editions on this document, as long as terms of the license is not violated.
    #1
  \end{nlist}
}

% Prerequisites
\newenvironment{prereq}{
\noindent \textbf{Prerequisites}\n

This course requires prerequisites of
}{
\n
}

% Reference list
\newenvironment{reflist}{
\begin{alist}
  \item Various professors associated to \textit{\gettitle}
}{
\end{alist}
}

% --------------------------------------------------------------

% Environments
\newcounter{scount}[section] % Counter

\newenvironment{crl}{ % Corollary
\parindent0pt
\begin{siderule}[linecolor=zr]{\color{zr}\textit{Corollary. }}
}{
\end{siderule}
}

\newenvironment{cmt}{ % Comment
\parindent0pt
\begin{siderule}[linecolor=zp]{\color{zp}\textit{Comment. }}
}{
\end{siderule}
}

\newenvironment{dft}{ % Definition
\parindent0pt
\refstepcounter{scount}
\begin{siderule}[linecolor=zg]{\color{zg}\textit{Definition \sct. }}
}{
\end{siderule}
}

\newenvironment{exm}{ % Example
\parindent0pt
\refstepcounter{scount}
\begin{siderule}[linecolor=zb]{\color{zb}\textit{Example \sct. }}
}{
\end{siderule}
}

\newenvironment{fig}{ % Figure
\parindent0pt
\refstepcounter{scount}
\begin{siderule}[linecolor=zy]{\color{zy}\textit{Figure \sct. }}
}{
\end{siderule}
}

\newenvironment{prv}{ % Proof
\parindent0pt
\begin{siderule}[linecolor=zr]\prf
}{
\end{siderule}
}

\newenvironment{pst}{ % Proposition
\parindent0pt
\refstepcounter{scount}
\begin{siderule}[linecolor=zr]{\color{zr}\textit{Proposition \sct. }}
}{
\end{siderule}
}

\newenvironment{tcn}{ % Technique
\parindent0pt
\begin{siderule}[linecolor=zp]{\color{zp}\textit{Technique. }}
}{
\end{siderule}
}

\newenvironment{thm}{ % Theorem
\parindent0pt
\refstepcounter{scount}
\begin{siderule}[linecolor=zr]{\color{zr}\textit{Theorem \sct. }}
}{
\end{siderule}
}

\newenvironment{alist}{ % Alphabetical list
\begin{enumerate}[label=(\alph*)]
}{
\end{enumerate}
}

\newenvironment{Alist}{ % Capitalized alphabetical list
\begin{enumerate}[label=(\Alph*)]
}{
\end{enumerate}
}

\newenvironment{nlist}{ % Number list
\begin{enumerate}[label=(\arabic*)]
}{
\end{enumerate}
}

\newenvironment{plist}{ % Point list
\begin{itemize}
}{
\end{itemize}
}

\newenvironment{rlist}{ % Roman list
\begin{enumerate}[label=(\roman*)]
}{
\end{enumerate}
}

\newmdenv[ % Siderule line
  topline=false,
  bottomline=false,
  rightline=false,
  rightmargin=0
]{siderule}

% --------------------------------------------------------------

% Warning filters
\WarningFilter{mdframed}{You got a bad break}
\hfuzz=8pt
